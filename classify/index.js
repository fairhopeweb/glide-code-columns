(()=>{var hr=Object.create;var g=Object.defineProperty,xr=Object.defineProperties,yr=Object.getOwnPropertyDescriptor,Tr=Object.getOwnPropertyDescriptors,Cr=Object.getOwnPropertyNames,A=Object.getOwnPropertySymbols,vr=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable;var j=(e,r,t)=>r in e?g(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,l=(e,r)=>{for(var t in r||(r={}))O.call(r,t)&&j(e,t,r[t]);if(A)for(var t of A(r))wr.call(r,t)&&j(e,t,r[t]);return e},b=(e,r)=>xr(e,Tr(r)),Sr=e=>g(e,"__esModule",{value:!0});var u=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Pr=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Cr(r))!O.call(e,i)&&i!=="default"&&g(e,i,{get:()=>r[i],enumerable:!(t=yr(r,i))||t.enumerable});return e},Rr=e=>Pr(Sr(g(e!=null?hr(vr(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var w=(e,r,t)=>new Promise((i,n)=>{var a=o=>{try{c(t.next(o))}catch(f){n(f)}},s=o=>{try{c(t.throw(o))}catch(f){n(f)}},c=o=>o.done?i(o.value):Promise.resolve(o.value).then(a,s);c((t=t.apply(e,r)).next())});var L=u((Qi,M)=>{function qr(e,r,t,i){var n=-1,a=e==null?0:e.length;for(i&&a&&(t=e[++n]);++n<a;)t=r(t,e[n],n,e);return t}M.exports=qr});var N=u((Xi,E)=>{function Ar(e){return function(r){return e==null?void 0:e[r]}}E.exports=Ar});var z=u((en,D)=>{var Or=N(),jr={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Mr=Or(jr);D.exports=Mr});var _=u((rn,U)=>{var Lr=typeof global=="object"&&global&&global.Object===Object&&global;U.exports=Lr});var k=u((tn,I)=>{var Er=_(),Nr=typeof self=="object"&&self&&self.Object===Object&&self,Dr=Er||Nr||Function("return this")();I.exports=Dr});var h=u((nn,F)=>{var zr=k(),Ur=zr.Symbol;F.exports=Ur});var J=u((un,Z)=>{function _r(e,r){for(var t=-1,i=e==null?0:e.length,n=Array(i);++t<i;)n[t]=r(e[t],t,e);return n}Z.exports=_r});var G=u((an,W)=>{var Ir=Array.isArray;W.exports=Ir});var Y=u((on,B)=>{var V=h(),H=Object.prototype,kr=H.hasOwnProperty,Fr=H.toString,m=V?V.toStringTag:void 0;function Zr(e){var r=kr.call(e,m),t=e[m];try{e[m]=void 0;var i=!0}catch(a){}var n=Fr.call(e);return i&&(r?e[m]=t:delete e[m]),n}B.exports=Zr});var $=u((sn,K)=>{var Jr=Object.prototype,Wr=Jr.toString;function Gr(e){return Wr.call(e)}K.exports=Gr});var re=u((cn,ee)=>{var Q=h(),Vr=Y(),Hr=$(),Br="[object Null]",Yr="[object Undefined]",X=Q?Q.toStringTag:void 0;function Kr(e){return e==null?e===void 0?Yr:Br:X&&X in Object(e)?Vr(e):Hr(e)}ee.exports=Kr});var ie=u((fn,te)=>{function $r(e){return e!=null&&typeof e=="object"}te.exports=$r});var ue=u((ln,ne)=>{var Qr=re(),Xr=ie(),et="[object Symbol]";function rt(e){return typeof e=="symbol"||Xr(e)&&Qr(e)==et}ne.exports=rt});var le=u((dn,fe)=>{var ae=h(),tt=J(),it=G(),nt=ue(),ut=1/0,oe=ae?ae.prototype:void 0,se=oe?oe.toString:void 0;function ce(e){if(typeof e=="string")return e;if(it(e))return tt(e,ce)+"";if(nt(e))return se?se.call(e):"";var r=e+"";return r=="0"&&1/e==-ut?"-0":r}fe.exports=ce});var x=u((pn,de)=>{var at=le();function ot(e){return e==null?"":at(e)}de.exports=ot});var me=u((mn,pe)=>{var st=z(),ct=x(),ft=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lt="\\u0300-\\u036f",dt="\\ufe20-\\ufe2f",pt="\\u20d0-\\u20ff",mt=lt+dt+pt,gt="["+mt+"]",bt=RegExp(gt,"g");function ht(e){return e=ct(e),e&&e.replace(ft,st).replace(bt,"")}pe.exports=ht});var be=u((gn,ge)=>{var xt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function yt(e){return e.match(xt)||[]}ge.exports=yt});var xe=u((bn,he)=>{var Tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Ct(e){return Tt.test(e)}he.exports=Ct});var Ue=u((hn,ze)=>{var ye="\\ud800-\\udfff",vt="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",St="\\u20d0-\\u20ff",Pt=vt+wt+St,Te="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",Rt="\\xac\\xb1\\xd7\\xf7",qt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",At="\\u2000-\\u206f",Ot=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ve="A-Z\\xc0-\\xd6\\xd8-\\xde",jt="\\ufe0e\\ufe0f",we=Rt+qt+At+Ot,Se="['\u2019]",Pe="["+we+"]",Mt="["+Pt+"]",Re="\\d+",Lt="["+Te+"]",qe="["+Ce+"]",Ae="[^"+ye+we+Re+Te+Ce+ve+"]",Et="\\ud83c[\\udffb-\\udfff]",Nt="(?:"+Mt+"|"+Et+")",Dt="[^"+ye+"]",Oe="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+ve+"]",zt="\\u200d",Me="(?:"+qe+"|"+Ae+")",Ut="(?:"+p+"|"+Ae+")",Le="(?:"+Se+"(?:d|ll|m|re|s|t|ve))?",Ee="(?:"+Se+"(?:D|LL|M|RE|S|T|VE))?",Ne=Nt+"?",De="["+jt+"]?",_t="(?:"+zt+"(?:"+[Dt,Oe,je].join("|")+")"+De+Ne+")*",It="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ft=De+Ne+_t,Zt="(?:"+[Lt,Oe,je].join("|")+")"+Ft,Jt=RegExp([p+"?"+qe+"+"+Le+"(?="+[Pe,p,"$"].join("|")+")",Ut+"+"+Ee+"(?="+[Pe,p+Me,"$"].join("|")+")",p+"?"+Me+"+"+Le,p+"+"+Ee,kt,It,Re,Zt].join("|"),"g");function Wt(e){return e.match(Jt)||[]}ze.exports=Wt});var Ie=u((xn,_e)=>{var Gt=be(),Vt=xe(),Ht=x(),Bt=Ue();function Yt(e,r,t){return e=Ht(e),r=t?void 0:r,r===void 0?Vt(e)?Bt(e):Gt(e):e.match(r)||[]}_e.exports=Yt});var Fe=u((yn,ke)=>{var Kt=L(),$t=me(),Qt=Ie(),Xt="['\u2019]",ei=RegExp(Xt,"g");function ri(e){return function(r){return Kt(Qt($t(r).replace(ei,"")),e,"")}}ke.exports=ri});var Je=u((Tn,Ze)=>{function ti(e,r,t){var i=-1,n=e.length;r<0&&(r=-r>n?0:n+r),t=t>n?n:t,t<0&&(t+=n),n=r>t?0:t-r>>>0,r>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+r];return a}Ze.exports=ti});var Ge=u((Cn,We)=>{var ii=Je();function ni(e,r,t){var i=e.length;return t=t===void 0?i:t,!r&&t>=i?e:ii(e,r,t)}We.exports=ni});var S=u((vn,Ve)=>{var ui="\\ud800-\\udfff",ai="\\u0300-\\u036f",oi="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",ci=ai+oi+si,fi="\\ufe0e\\ufe0f",li="\\u200d",di=RegExp("["+li+ui+ci+fi+"]");function pi(e){return di.test(e)}Ve.exports=pi});var Be=u((wn,He)=>{function mi(e){return e.split("")}He.exports=mi});var tr=u((Sn,rr)=>{var Ye="\\ud800-\\udfff",gi="\\u0300-\\u036f",bi="\\ufe20-\\ufe2f",hi="\\u20d0-\\u20ff",xi=gi+bi+hi,yi="\\ufe0e\\ufe0f",Ti="["+Ye+"]",P="["+xi+"]",R="\\ud83c[\\udffb-\\udfff]",Ci="(?:"+P+"|"+R+")",Ke="[^"+Ye+"]",$e="(?:\\ud83c[\\udde6-\\uddff]){2}",Qe="[\\ud800-\\udbff][\\udc00-\\udfff]",vi="\\u200d",Xe=Ci+"?",er="["+yi+"]?",wi="(?:"+vi+"(?:"+[Ke,$e,Qe].join("|")+")"+er+Xe+")*",Si=er+Xe+wi,Pi="(?:"+[Ke+P+"?",P,$e,Qe,Ti].join("|")+")",Ri=RegExp(R+"(?="+R+")|"+Pi+Si,"g");function qi(e){return e.match(Ri)||[]}rr.exports=qi});var nr=u((Pn,ir)=>{var Ai=Be(),Oi=S(),ji=tr();function Mi(e){return Oi(e)?ji(e):Ai(e)}ir.exports=Mi});var ar=u((Rn,ur)=>{var Li=Ge(),Ei=S(),Ni=nr(),Di=x();function zi(e){return function(r){r=Di(r);var t=Ei(r)?Ni(r):void 0,i=t?t[0]:r.charAt(0),n=t?Li(t,1).join(""):r.slice(1);return i[e]()+n}}ur.exports=zi});var sr=u((qn,or)=>{var Ui=ar(),_i=Ui("toUpperCase");or.exports=_i});var fr=u((An,cr)=>{var Ii=Fe(),ki=sr(),Fi=Ii(function(e,r,t){return e+(t?" ":"")+ki(r)});cr.exports=Fi});var br=u((jn,T)=>{T.exports=function(e){return new d(e)};var gr=T.exports.STATE_KEYS=["categories","docCount","totalDocuments","vocabulary","vocabularySize","wordCount","wordFrequencyCount","options"];T.exports.fromJson=function(e){var r;try{r=JSON.parse(e)}catch(i){throw new Error("Naivebayes.fromJson expects a valid JSON string.")}var t=new d(r.options);return gr.forEach(function(i){if(typeof r[i]=="undefined"||r[i]===null)throw new Error("Naivebayes.fromJson: JSON string is missing an expected property: `"+i+"`.");t[i]=r[i]}),t};var Hi=function(e){var r=/[^(a-zA-ZA-Яa-я0-9_)+\s]/g,t=e.replace(r," ");return t.split(/\s+/)};function d(e){if(this.options={},typeof e!="undefined"){if(!e||typeof e!="object"||Array.isArray(e))throw TypeError("NaiveBayes got invalid `options`: `"+e+"`. Pass in an object.");this.options=e}this.tokenizer=this.options.tokenizer||Hi,this.vocabulary={},this.vocabularySize=0,this.totalDocuments=0,this.docCount={},this.wordCount={},this.wordFrequencyCount={},this.categories={}}d.prototype.initializeCategory=function(e){return this.categories[e]||(this.docCount[e]=0,this.wordCount[e]=0,this.wordFrequencyCount[e]={},this.categories[e]=!0),this};d.prototype.learn=async function(e,r){var t=this;t.initializeCategory(r),t.docCount[r]++,t.totalDocuments++;var i=await t.tokenizer(e),n=t.frequencyTable(i);return Object.keys(n).forEach(function(a){t.vocabulary[a]||(t.vocabulary[a]=!0,t.vocabularySize++);var s=n[a];t.wordFrequencyCount[r][a]?t.wordFrequencyCount[r][a]+=s:t.wordFrequencyCount[r][a]=s,t.wordCount[r]+=s}),t};d.prototype.categorize=async function(e){var r=this,t=-1/0,i=null,n=await r.tokenizer(e),a=r.frequencyTable(n);return Object.keys(r.categories).forEach(function(s){var c=r.docCount[s]/r.totalDocuments,o=Math.log(c);Object.keys(a).forEach(function(f){var C=a[f],v=r.tokenProbability(f,s);o+=C*Math.log(v)}),o>t&&(t=o,i=s)}),i};d.prototype.tokenProbability=function(e,r){var t=this.wordFrequencyCount[r][e]||0,i=this.wordCount[r];return(t+1)/(i+this.vocabularySize)};d.prototype.frequencyTable=function(e){var r=Object.create(null);return e.forEach(function(t){r[t]?r[t]++:r[t]=1}),r};d.prototype.toJson=function(){var e={},r=this;gr.forEach(function(i){e[i]=r[i]});var t=JSON.stringify(e);return t}});var lr=Rr(fr());function dr(e){return e instanceof Date?e.toISOString():Array.isArray(e)?e.map(dr):e}function Zi(e,r){return w(this,null,function*(){var c;let{data:{key:t,params:i}}=e,n,a;try{n=yield r(...i)}catch(o){n=void 0;try{a=o.toString()}catch(f){a="Exception can't be stringified."}}let s={key:t};n!==void 0&&(n=dr(n),s.result={type:"string",value:n}),a!==void 0&&(s.error=a),((c=e.source)==null?void 0:c.postMessage).call(c,s,"*")})}function Ji(e){return typeof window!="undefined"&&window.addEventListener("message",r=>Zi(r,e.run)),b(l({},e),{json:JSON.stringify(Gi(e),null,2)})}var Wi=`
        <svg
          width="48"
          height="48"
          viewBox="0 0 26 27"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M0 14.85L14.3 0V7.29C14.3 11.4653 11.0406 14.85 7.02 14.85H0Z"
            fill="currentColor"
          />
          <path
            d="M11.7 19.71C11.7 15.5347 14.9594 12.15 18.98 12.15H26L11.7 27V19.71Z"
            fill="currentColor"
          />
        </svg>
    `,pr=`<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12.0002 34.828L2.58624 25.414C1.80524 24.633 1.80524 23.367 2.58624 22.586L12.0002 13.172L14.8292 16L6.82924 24L14.8292 32L12.0002 34.828Z" fill="currentColor"/>
<path d="M36.0004 34.828L33.1714 32L41.1714 24L33.1714 16L36.0004 13.172L45.4144 22.586C46.1954 23.367 46.1954 24.633 45.4144 25.414L36.0004 34.828Z" fill="currentColor"/>
<path d="M26.5485 5.57617L17.5723 41.4553L21.4527 42.4261L30.4289 6.54697L26.5485 5.57617Z" fill="currentColor"/>
</svg>`;function Gi(e){let{name:r,category:t,description:i,author:n,result:a,params:s,about:c,video:o}=e,{icon:f=pr}=e;return f==="glide"&&(f=Wi),{name:r,category:t,description:i,author:n,result:a,about:c,icon:f,video:o,params:Object.entries(s).map(([C,v])=>l({name:C},v))}}var Vi={name:"Glide Column",category:"General",description:"No description",author:"Glide <hello@glideapps.com>",params:{},result:{type:"string"},icon:pr,about:void 0,video:void 0,tests:[],run(){return w(this,null,function*(){})}},y=class{constructor(r={},t=[]){this.definition=l(l({},Vi),r),this.requiredParams=[...t]}with(r,t=[]){return new y(l(l({},this.definition),r),[...this.requiredParams,...t])}withName(r){return this.with({name:r})}withCategory(r){return this.with({category:r})}withDescription(r){return this.with({description:r})}withAbout(r){return this.with({about:r})}withVideo(r){return this.with({video:r})}withIcon(r){return this.with({icon:r})}withAuthor(r,t){return this.with({author:`${r} <${t}>`})}withTest(r,t){let{tests:i=[]}=this.definition;return this.with({tests:[...i,{params:r,expectedResult:t}]})}withResult(r){return this.with({result:{type:r}})}withStringResult(){return this.withResult("string")}withPrimitiveResult(){return this.withResult("primitive")}withNumberResult(){return this.withResult("number")}withBooleanResult(){return this.withResult("boolean")}withParam(r,t,i){return i===void 0&&(i=(0,lr.default)(t)),this.with({params:b(l({},this.definition.params),{[t]:{type:r,displayName:i}})})}withRequiredParam(r,t,i){return this.withParam(r,t,i).with({},[t])}withPrimitiveParam(r,t){return this.withParam("primitive",r,t)}withStringParam(r,t){return this.withParam("string",r,t)}withDateParam(r,t){return this.withParam("date-time",r,t)}withNumberParam(r,t){return this.withParam("number",r,t)}withRequiredPrimitiveParam(r,t){return this.withRequiredParam("primitive",r,t)}withRequiredStringParam(r,t){return this.withRequiredParam("string",r,t)}withRequiredDateParam(r,t){return this.withRequiredParam("date-time",r,t)}withRequiredNumberParam(r,t){return this.withRequiredParam("number",r,t)}run(r){let{params:t}=this.definition,i=this.requiredParams,n=Object.keys(t);function a(...s){let c={};if(s.forEach(({value:o},f)=>{c[n[f]]=o}),!i.some(o=>c[o]===void 0))return r(c)}return Ji(b(l({},this.definition),{run:a}))}};function mr(e){return new y({name:e})}var Bi=br(),Yi="",q={};function Ki(e){var r;return(r=q[e])!=null?r:q[e]=Bi()}var Ln=mr("Classify Text").withCategory("Machine Learning").withDescription("Categorize text based on examples.").withAuthor("ttezel","https://github.com/ttezel/bayes").withAbout(`
      The Classify Text column takes training data in the form of text values, and known categories for those text values. When it sees new text values without categories provided, it tries to infer the category based on the examples it's seen.

      **This is just a proof of concept. Because Glide does not guarantee that all columns are evaluated (it only evaluates columns required to show the current screen), this will usually not produce good results.**`).withRequiredStringParam("phrase").withStringParam("category","Training Data").withStringParam("id","Classifier ID").withStringResult().run(({id:e=Yi,phrase:r,category:t})=>{let i=Ki(e);return t!==void 0?(i.learn(r,t),t):i.categorize(r)});})();
//# sourceMappingURL=index.js.map
